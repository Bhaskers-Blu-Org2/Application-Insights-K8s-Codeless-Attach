environment:
  host:
    os: 'linux'
  runtime:
    provider: 'appcontainer'
    image: 'cdpxlinux.azurecr.io/legacy/global/ubuntu-1604-all:1.0'
    source_mode: 'link'

version:
  name: 'AKSCodelessAttach'
  major: 0
  minor: 9
  tag: 'beta'
  system: 'custom'         # Must be one of patch, buildrevision, revisioncounter or custom. Other schemes can be added based on feedback.
  exclude_commit: true 
  
restore:
  commands:
    - !!defaultcommand
      name: 'Restore NPM packages for hook'
      command: './.build/src/restore.sh'
  
build:
  commands:
    - !!defaultcommand
      name: 'build hook source'
      command: './.build/src/build.sh'
    - !!dockerbuildcommand
      name: 'build hook docker image'
      context_folder: 'src'
      repository_name: 'mutating-webhook'
      publish_unique_tag: true

  